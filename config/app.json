{
  "meta": { "version": 1, "debug": false, "palette": "candyPastels" },
  "fsm": {
    "initialState": "Preparing",
    "states": [
      {
        "name": "Preparing",
        "enterActions": [{ "type": "uiPrompt", "text": "Maybe light something." }],
        "sequence": [
          { "action": "playOneShot", "sound": "fridge", "text": "Next: sharpen the knife." },
          { "action": "playOneShot", "sound": "knife_sharpen", "requires": "drag", "text": "Next: chop some ingredients." },
          { "action": "playOneShot", "sound": "chopping", "text": "Next: cut the veggies." },
          { "action": "playOneShot", "sound": "cutting_things", "text": "Next: squeeze some juice." },
          { "action": "playOneShot", "sound": "juicing", "requires": "hold", "text": "Next: turn on the tap." },
          { "action": "playOneShot", "sound": "tap", "text": "Next: tear the bag." },
          { "action": "playOneShot", "sound": "bag_rustling", "text": "Next: start cooking." },
          { "action": "gotoState", "to": "Cooking" }
        ]
      },
      {
        "name": "Cooking",
        "enterActions": [{ "type": "uiPrompt", "text": "Multitasking is easy. Add more. More." }],
        "sequence": [
          { "action": "playOneShot", "sound": "lighter", "text": "Next: turn on the stove." },
          { "action": "startSustained", "sound": "stove", "fsm": { "setStove": true }, "text": "Next: get the pan hissing." },
          { "action": "startSustained", "sound": "hissing_pan", "if": { "stoveOn": true }, "text": "Next: pour some water." },
          { "action": "playOneShot", "sound": "water_pour", "requires": "drag", "text": "Next: Next: stir a glass." },
          { "action": "playOneShot", "sound": "glass_stirring", "requires": "hold", "text": "Next: spray the pan." },
          { "action": "playOneShot", "sound": "cooking_spray", "requires": "hold", "text": "Next: ping the microwave." },
          { "action": "playOneShot", "sound": "microwave", "fsm": { "bumpMicrowave": true }, "text": "Next: clink the glasses." },
          { "action": "playOneShot", "sound": "glass_clink", "text": "Next: bring water to a boil." },
          { "action": "startSustained", "sound": "boiling_water", "if": { "stoveOn": true }, "text": "Next: accidents begin." },
          { "action": "gotoState", "to": "Accident Breakout" }
        ]
      },
      {
        "name": "Accident Breakout",
        "enterActions": [{ "type": "uiPrompt", "text": "Itâ€™s fine. Totally fine." }],
        "sequence": [
          { "action": "playOneShot", "sound": "clatter", "text": "Next: something breaks." },
          { "action": "playOneShot", "sound": "thing_breaking", "text": "Next: a heavy thump." },
          { "action": "playOneShot", "sound": "thump", "text": "Next: chaos erupts." },
          { "action": "gotoState", "to": "Chaos" }
        ]
      },
      {
        "name": "Chaos",
        "enterActions": [{ "type": "uiPrompt", "text": "Nailed it." }],
        "sequence": [
          { "action": "startSustained", "sound": "fire_alarm", "text": "Next: more clatter." },
          { "action": "playOneShot", "sound": "clatter", "text": "Next: more things breaking." },
          { "action": "playOneShot", "sound": "thing_breaking", "text": "Next: another thump." },
          { "action": "playOneShot", "sound": "thump", "text": "Next: it only gets messier." }
        ]
      }
    ]
  },
  "sounds": [
    { "id": "stove", "file": "stove.wav", "visual": "heatRing", "bus": "beds" },
    { "id": "water_pour", "file": "water_pour.wav", "visual": "ribbonWave", "bus": "fx" },
    { "id": "fire_alarm", "file": "fire_alarm.wav", "visual": "flashingCircularSpectrogram", "bus": "accidents" },
    { "id": "clatter", "file": "clatter.wav", "visual": "accidentBursts", "bus": "accidents" },
    { "id": "thing_breaking", "file": "thing_breaking.wav", "visual": "accidentBursts", "bus": "accidents" },
    { "id": "thump", "file": "thump.wav", "visual": "accidentBursts", "bus": "accidents" },
    { "id": "bag_rustling", "file": "bag_rustling.wav", "visual": "polygonWrinkle", "bus": "fx" },
    { "id": "glass_clink", "file": "glass_clink.wav", "visual": "starburstShards", "bus": "fx" },
    { "id": "lighter", "file": "lighter.wav", "visual": "flareHeat", "bus": "fx" },
    { "id": "cooking_spray", "file": "cooking_spray.wav", "visual": "sprayCone", "bus": "fx" },
    { "id": "boiling_water", "file": "boiling_water.wav", "visual": "bubbleField", "bus": "beds" },
    { "id": "microwave", "file": "microwave.wav", "visual": "microwaveGrid", "bus": "fx" },
    { "id": "tap", "file": "tap.wav", "visual": "rippleEmitter", "bus": "beds" },
    { "id": "fridge", "file": "fridge.wav", "visual": "vortexSpiral", "bus": "fx" },
    { "id": "chopping", "file": "chopping.wav", "visual": "sparkLine", "bus": "fx" },
    { "id": "cutting_things", "file": "cutting_things.wav", "visual": "pulseStrokes", "bus": "fx" },
    { "id": "glass_stirring", "file": "glass_stirring.wav", "visual": "vortexSpiral", "bus": "fx" },
    { "id": "knife_sharpen", "file": "knife_sharpen.wav", "visual": "sparkLine", "bus": "fx" },
    { "id": "juicing", "file": "juicing.wav", "visual": "citrusSplash", "bus": "fx" },
    { "id": "hissing_pan", "file": "hissing_pan.wav", "visual": "steamParticles", "bus": "beds" }
  ]
}
