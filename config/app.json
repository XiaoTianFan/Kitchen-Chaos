{
  "meta": { "version": 1, "debug": false, "palette": "candyPastels" },
  "fsm": {
    "initialState": "Preparing",
    "states": [
      {
        "name": "Preparing",
        "enterActions": [{ "type": "uiPrompt", "text": "Maybe light something." }],
        "sequence": [
          { "action": "playOneShot", "sound": "fridge", "text": "Let’s sharpen the knife." },
          { "action": "playOneShot", "sound": "knife_sharpen", "text": "Slice the veggies." },
          { "action": "playOneShot", "sound": "chopping", "text": "Chop a few things." },
          { "action": "playOneShot", "sound": "cutting_things", "text": "Squeeze some juice." },
          { "action": "playOneShot", "sound": "squeeze_juice", "text": "Turn on the tap." },
          { "action": "playOneShot", "sound": "tap", "text": "Tear open the bag." },
          { "action": "playOneShot", "sound": "bag_rustling", "text": "Time to start cooking." },
          { "action": "gotoState", "to": "Cooking" }
        ]
      },
      {
        "name": "Cooking",
        "enterActions": [{ "type": "uiPrompt", "text": "Multitasking is easy. Add more. More." }],
        "sequence": [
          { "action": "playOneShot", "sound": "lighter", "text": "Turn on the stove." },
          { "action": "playOneShot", "sound": "stove", "fsm": { "setStove": true }, "text": "Get the pan hissing." },
          { "action": "startSustained", "sound": "stove_fire", "text": "Flames catch from the burner." },
          { "action": "startSustained", "sound": "hissing_pan", "if": { "stoveOn": true }, "text": "Pour in some water." },
          { "action": "playOneShot", "sound": "water_pour", "requires": "drag", "text": "Give the glass a stir." },
          { "action": "playOneShot", "sound": "glass_stirring", "requires": "hold", "text": "Spray the pan." },
          { "action": "playOneShot", "sound": "cooking_spray", "requires": "hold", "text": "Ping the microwave." },
          { "action": "playOneShot", "sound": "microwave", "fsm": { "bumpMicrowave": true }, "text": "Clink the glasses." },
          { "action": "playOneShot", "sound": "glass_clink", "text": "Bring the water to a boil." },
          { "action": "startSustained", "sound": "boiling_water", "if": { "stoveOn": true }, "text": "Here come the accidents." },
          { "action": "gotoState", "to": "Accident Breakout" }
        ]
      },
      {
        "name": "Accident Breakout",
        "enterActions": [{ "type": "uiPrompt", "text": "It’s fine. Totally fine." }],
        "sequence": [
          { "action": "playOneShot", "sound": "clatter", "text": "Something clatters behind you." },
          { "action": "playOneShot", "sound": "pot_falling", "text": "Glass shatters somewhere." },
          { "action": "playOneShot", "sound": "objects_falling", "text": "Multiple objects cascade down." },
          { "action": "playOneShot", "sound": "thump", "text": "A heavy thump echoes." },
          { "action": "gotoState", "to": "Chaos" }
        ]
      },
      {
        "name": "Chaos",
        "enterActions": [{ "type": "uiPrompt", "text": "Nailed it." }],
        "sequence": [
          { "action": "startSustained", "sound": "fire_alarm", "text": "The alarm blares overhead." },
          { "action": "playOneShot", "sound": "clatter", "text": "Clatter intensifies." },
          { "action": "playOneShot", "sound": "pot_falling", "text": "Another thing breaks." },
          { "action": "playOneShot", "sound": "thump", "text": "Yet another thump." }
        ]
      }
    ]
  },
  "sounds": [
    { "id": "stove", "file": "stove.ogg", "visual": "heatRing", "bus": "beds", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "water_pour", "file": "water_pour.ogg", "visual": "ribbonWave", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "fire_alarm", "file": "fire_alarm.ogg", "visual": "flashingCircularSpectrogram", "bus": "accidents", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "clatter", "file": "clatter.ogg", "visual": "accidentBursts", "bus": "accidents", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "pot_falling", "file": "pot_falling.ogg", "visual": "accidentBursts", "bus": "accidents", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "thump", "file": "thump.ogg", "visual": "accidentBursts", "bus": "accidents", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "bag_rustling", "file": "bag_rustling.ogg", "visual": "polygonWrinkle", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "glass_clink", "file": "glass_clink.ogg", "visual": "starburstShards", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "lighter", "file": "lighter.ogg", "visual": "flareHeat", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "cooking_spray", "file": "cooking_spray.ogg", "visual": "sprayCone", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "boiling_water", "file": "boiling_water.ogg", "visual": "bubbleField", "bus": "beds", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "microwave", "file": "microwave.ogg", "visual": "microwaveGrid", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "tap", "file": "tap.ogg", "visual": "tapWaterSpectrogram", "bus": "beds", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "fridge", "file": "fridge.ogg", "visual": "fridgeDrop", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10, "gate": { "thresholdDb": -18, "attackMs": 15, "releaseMs": 150, "minIntervalMs": 90 } },
    { "id": "chopping", "file": "chopping.ogg", "visual": "chopStripe", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10, "gate": { "thresholdDb": -32, "attackMs": 12, "releaseMs": 140, "minIntervalMs": 80 } },
    { "id": "cutting_things", "file": "cutting_things.ogg", "visual": "cutStripe", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10, "gate": { "thresholdDb": -38, "attackMs": 10, "releaseMs": 120, "minIntervalMs": 60 } },
    { "id": "glass_stirring", "file": "glass_stirring.ogg", "visual": "vortexSpiral", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "knife_sharpen", "file": "knife_sharpen.ogg", "visual": "knifeStripe", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10, "gate": { "thresholdDb": -28, "attackMs": 10, "releaseMs": 120, "minIntervalMs": 70 } },
    { "id": "squeeze_juice", "file": "squeeze_juice.ogg", "visual": "juiceDroplets", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10, "gate": { "thresholdDb": -40, "attackMs": 15, "releaseMs": 150, "minIntervalMs": 90 } },
    { "id": "hissing_pan", "file": "hissing_pan.ogg", "visual": "steamParticles", "bus": "beds", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "stove_fire", "file": "stove_fire.ogg", "visual": "flareHeat", "bus": "fx", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 },
    { "id": "objects_falling", "file": "objects_falling.ogg", "visual": "accidentBursts", "bus": "accidents", "gain": 0.9, "fadeInMs": 10, "fadeOutMs": 10 }
  ]
}
