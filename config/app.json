{
  "meta": { "version": 1, "debug": false, "palette": "candyPastels" },
  "fsm": {
    "initialState": "Preparing",
    "states": [
      {
        "name": "Preparing",
        "enterActions": [{ "type": "uiPrompt", "text": "Maybe light something." }],
        "sequence": [
          { "action": "playOneShot", "sound": "lighter", "text": "You flick the lighter." },
          { "action": "toggleSustained", "sound": "stove", "fsm": { "setStove": true }, "text": "The stove ignites." },
          { "action": "playOneShot", "sound": "bag_rustling", "text": "Grocery bag rustles open." },
          { "action": "playOneShot", "sound": "fridge", "text": "You open the fridge." },
          { "action": "gotoState", "to": "Cooking" }
        ]
      },
      {
        "name": "Cooking",
        "enterActions": [{ "type": "uiPrompt", "text": "Multitasking is easy. Add more. More." }],
        "sequence": [
          { "action": "playOneShot", "sound": "cooking_spray", "requires": "hold", "text": "You spray the pan." },
          { "action": "startSustained", "sound": "hissing_pan", "if": { "stoveOn": true }, "text": "The pan starts to hiss." },
          { "action": "playOneShot", "sound": "chopping", "text": "You chop ingredients." },
          { "action": "playOneShot", "sound": "cutting_things", "text": "You slice through veggies." },
          { "action": "playOneShot", "sound": "microwave", "fsm": { "bumpMicrowave": true }, "text": "Microwave beeps." },
          { "action": "playOneShot", "sound": "water_pour", "requires": "drag", "text": "You pour water." },
          { "action": "startSustained", "sound": "boiling_water", "requires": "drag", "if": { "stoveOn": true }, "text": "Water begins to boil." },
          { "action": "playOneShot", "sound": "glass_clink", "text": "Glasses clink on the counter." },
          { "action": "playOneShot", "sound": "glass_stirring", "requires": "hold", "text": "You stir a glass." },
          { "action": "playOneShot", "sound": "knife_sharpen", "requires": "drag", "text": "You sharpen the knife." },
          { "action": "playOneShot", "sound": "juicing", "requires": "hold", "text": "You squeeze fresh juice." },
          { "action": "gotoState", "to": "Accident Breakout" }
        ]
      },
      {
        "name": "Accident Breakout",
        "enterActions": [{ "type": "uiPrompt", "text": "Itâ€™s fine. Totally fine." }],
        "sequence": [
          { "action": "playOneShot", "sound": "clatter", "text": "Something clatters behind you." },
          { "action": "playOneShot", "sound": "thing_breaking", "text": "Glass shatters somewhere." },
          { "action": "playOneShot", "sound": "thump", "text": "A heavy thump echoes." },
          { "action": "gotoState", "to": "Chaos" }
        ]
      },
      {
        "name": "Chaos",
        "enterActions": [{ "type": "uiPrompt", "text": "Nailed it." }],
        "sequence": [
          { "action": "startSustained", "sound": "fire_alarm", "text": "The alarm blares overhead." },
          { "action": "playOneShot", "sound": "clatter", "text": "Clatter intensifies." },
          { "action": "playOneShot", "sound": "thing_breaking", "text": "Another thing breaks." },
          { "action": "playOneShot", "sound": "thump", "text": "Yet another thump." }
        ]
      }
    ]
  },
  "sounds": [
    { "id": "stove", "file": "stove.wav", "type": "sustained_toggle", "visual": "heatRing", "bus": "beds" },
    { "id": "water_pour", "file": "water_pour.wav", "type": "user_transient_drag", "visual": "ribbonWave", "bus": "fx" },
    { "id": "fire_alarm", "file": "fire_alarm.wav", "type": "auto_sustained_move", "visual": "flashingCircularSpectrogram", "bus": "accidents" },
    { "id": "clatter", "file": "clatter.wav", "type": "auto_transient", "visual": "accidentBursts", "bus": "accidents" },
    { "id": "thing_breaking", "file": "thing_breaking.wav", "type": "auto_transient", "visual": "accidentBursts", "bus": "accidents" },
    { "id": "thump", "file": "thump.wav", "type": "auto_transient", "visual": "accidentBursts", "bus": "accidents" },
    { "id": "bag_rustling", "file": "bag_rustling.wav", "type": "user_transient", "visual": "polygonWrinkle", "bus": "fx" },
    { "id": "glass_clink", "file": "glass_clink.wav", "type": "user_transient", "visual": "starburstShards", "bus": "fx" },
    { "id": "lighter", "file": "lighter.wav", "type": "user_transient", "visual": "flareHeat", "bus": "fx" },
    { "id": "cooking_spray", "file": "cooking_spray.wav", "type": "user_sustained_hold", "visual": "sprayCone", "bus": "fx" },
    { "id": "boiling_water", "file": "boiling_water.wav", "type": "user_sustained", "visual": "bubbleField", "bus": "beds" },
    { "id": "microwave", "file": "microwave.wav", "type": "user_transient", "visual": "microwaveGrid", "bus": "fx" },
    { "id": "tap", "file": "tap.wav", "type": "sustained_toggle", "visual": "rippleEmitter", "bus": "beds" },
    { "id": "fridge", "file": "fridge.wav", "type": "user_transient", "visual": "vortexSpiral", "bus": "fx" },
    { "id": "chopping", "file": "chopping.wav", "type": "user_transient", "visual": "sparkLine", "bus": "fx" },
    { "id": "cutting_things", "file": "cutting_things.wav", "type": "user_transient", "visual": "pulseStrokes", "bus": "fx" },
    { "id": "glass_stirring", "file": "glass_stirring.wav", "type": "user_sustained_hold", "visual": "vortexSpiral", "bus": "fx" },
    { "id": "knife_sharpen", "file": "knife_sharpen.wav", "type": "user_sustained_hold", "visual": "sparkLine", "bus": "fx" },
    { "id": "juicing", "file": "juicing.wav", "type": "user_sustained_hold", "visual": "citrusSplash", "bus": "fx" },
    { "id": "hissing_pan", "file": "hissing_pan.wav", "type": "user_sustained", "visual": "steamParticles", "bus": "beds" }
  ]
}
